var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { IonicNativePlugin, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
var BLEOriginal = /** @class */ (function (_super) {
    __extends(BLEOriginal, _super);
    function BLEOriginal() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BLEOriginal.prototype.scan = function (services, seconds) { return cordova(this, "scan", { "observable": true }, arguments); };
    BLEOriginal.prototype.startScan = function (services) { return cordova(this, "startScan", { "observable": true, "clearFunction": "stopScan", "clearWithArgs": false }, arguments); };
    BLEOriginal.prototype.startScanWithOptions = function (services, options) { return cordova(this, "startScanWithOptions", { "observable": true, "clearFunction": "stopScan", "clearWithArgs": false }, arguments); };
    BLEOriginal.prototype.stopScan = function () { return cordova(this, "stopScan", {}, arguments); };
    BLEOriginal.prototype.setPin = function (pin) { return cordova(this, "setPin", { "observable": true }, arguments); };
    BLEOriginal.prototype.connect = function (deviceId) { return cordova(this, "connect", { "observable": true, "clearFunction": "disconnect", "clearWithArgs": true }, arguments); };
    BLEOriginal.prototype.autoConnect = function (deviceId, connectCallback, disconnectCallback) { return cordova(this, "autoConnect", { "sync": true }, arguments); };
    BLEOriginal.prototype.requestMtu = function (deviceId, mtuSize) { return cordova(this, "requestMtu", {}, arguments); };
    BLEOriginal.prototype.refreshDeviceCache = function (deviceId, timeoutMillis) { return cordova(this, "refreshDeviceCache", {}, arguments); };
    BLEOriginal.prototype.disconnect = function (deviceId) { return cordova(this, "disconnect", {}, arguments); };
    BLEOriginal.prototype.read = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "read", {}, arguments); };
    BLEOriginal.prototype.write = function (deviceId, serviceUUID, characteristicUUID, value) { return cordova(this, "write", {}, arguments); };
    BLEOriginal.prototype.writeWithoutResponse = function (deviceId, serviceUUID, characteristicUUID, value) { return cordova(this, "writeWithoutResponse", {}, arguments); };
    BLEOriginal.prototype.startNotification = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "startNotification", { "observable": true, "destruct": true, "clearFunction": "stopNotification", "clearWithArgs": true }, arguments); };
    BLEOriginal.prototype.stopNotification = function (deviceId, serviceUUID, characteristicUUID) { return cordova(this, "stopNotification", {}, arguments); };
    BLEOriginal.prototype.isConnected = function (deviceId) { return cordova(this, "isConnected", {}, arguments); };
    BLEOriginal.prototype.isEnabled = function () { return cordova(this, "isEnabled", {}, arguments); };
    BLEOriginal.prototype.startStateNotifications = function () { return cordova(this, "startStateNotifications", { "observable": true, "clearFunction": "stopStateNotifications", "clearWithArgs": false }, arguments); };
    BLEOriginal.prototype.stopStateNotifications = function () { return cordova(this, "stopStateNotifications", {}, arguments); };
    BLEOriginal.prototype.showBluetoothSettings = function () { return cordova(this, "showBluetoothSettings", {}, arguments); };
    BLEOriginal.prototype.enable = function () { return cordova(this, "enable", {}, arguments); };
    BLEOriginal.prototype.readRSSI = function (deviceId) { return cordova(this, "readRSSI", {}, arguments); };
    BLEOriginal.prototype.connectedPeripheralsWithServices = function (services) { return cordova(this, "connectedPeripheralsWithServices", {}, arguments); };
    BLEOriginal.prototype.peripheralsWithIdentifiers = function (uuids) { return cordova(this, "peripheralsWithIdentifiers", {}, arguments); };
    BLEOriginal.prototype.bondedDevices = function () { return cordova(this, "bondedDevices", {}, arguments); };
    BLEOriginal.prototype.isLocationEnabled = function () { return cordova(this, "isLocationEnabled", {}, arguments); };
    BLEOriginal.pluginName = "BLE";
    BLEOriginal.plugin = "cordova-plugin-ble-central";
    BLEOriginal.pluginRef = "ble";
    BLEOriginal.repo = "https://github.com/don/cordova-plugin-ble-central";
    BLEOriginal.platforms = ["Android", "iOS"];
    return BLEOriginal;
}(IonicNativePlugin));
var BLE = new BLEOriginal();
export { BLE };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL2JsZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQ0EsT0FBTyw4QkFBc0MsTUFBTSxvQkFBb0IsQ0FBQztBQUN4RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDOztJQXVMVCx1QkFBaUI7Ozs7SUFpQnhDLGtCQUFJLGFBQUMsUUFBa0IsRUFBRSxPQUFlO0lBeUJ4Qyx1QkFBUyxhQUFDLFFBQWtCO0lBZTVCLGtDQUFvQixhQUFDLFFBQWtCLEVBQUUsT0FBdUI7SUFtQmhFLHNCQUFRO0lBcUJSLG9CQUFNLGFBQUMsR0FBVztJQXVCbEIscUJBQU8sYUFBQyxRQUFnQjtJQWdDeEIseUJBQVcsYUFBQyxRQUFnQixFQUFFLGVBQW9CLEVBQUUsa0JBQXVCO0lBb0IzRSx3QkFBVSxhQUFDLFFBQWdCLEVBQUUsT0FBZTtJQXNCNUMsZ0NBQWtCLGFBQUMsUUFBZ0IsRUFBRSxhQUFxQjtJQWdCMUQsd0JBQVUsYUFBQyxRQUFnQjtJQWEzQixrQkFBSSxhQUFDLFFBQWdCLEVBQUUsV0FBbUIsRUFBRSxrQkFBMEI7SUFpQ3RFLG1CQUFLLGFBQUMsUUFBZ0IsRUFBRSxXQUFtQixFQUFFLGtCQUEwQixFQUFFLEtBQWtCO0lBYzNGLGtDQUFvQixhQUNsQixRQUFnQixFQUNoQixXQUFtQixFQUNuQixrQkFBMEIsRUFDMUIsS0FBa0I7SUE0QnBCLCtCQUFpQixhQUFDLFFBQWdCLEVBQUUsV0FBbUIsRUFBRSxrQkFBMEI7SUFhbkYsOEJBQWdCLGFBQUMsUUFBZ0IsRUFBRSxXQUFtQixFQUFFLGtCQUEwQjtJQWtCbEYseUJBQVcsYUFBQyxRQUFnQjtJQVU1Qix1QkFBUztJQXFCVCxxQ0FBdUI7SUFVdkIsb0NBQXNCO0lBVXRCLG1DQUFxQjtJQVVyQixvQkFBTTtJQVlOLHNCQUFRLGFBQUMsUUFBZ0I7SUFhekIsOENBQWdDLGFBQUMsUUFBa0I7SUFZbkQsd0NBQTBCLGFBQUMsS0FBZTtJQVcxQywyQkFBYTtJQVdiLCtCQUFpQjs7Ozs7O2NBOW5CbkI7RUF5THlCLGlCQUFpQjtTQUE3QixHQUFHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29yZG92YSwgSW9uaWNOYXRpdmVQbHVnaW4sIFBsdWdpbiB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQkxFU2Nhbk9wdGlvbnMge1xuICAvKiogdHJ1ZSBpZiBkdXBsaWNhdGUgZGV2aWNlcyBzaG91bGQgYmUgcmVwb3J0ZWQsIGZhbHNlIChkZWZhdWx0KSBpZiBkZXZpY2VzIHNob3VsZCBvbmx5IGJlIHJlcG9ydGVkIG9uY2UuICAqL1xuICByZXBvcnREdXBsaWNhdGVzPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBAbmFtZSBCTEVcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBwbHVnaW4gZW5hYmxlcyBjb21tdW5pY2F0aW9uIGJldHdlZW4gYSBwaG9uZSBhbmQgQmx1ZXRvb3RoIExvdyBFbmVyZ3kgKEJMRSkgcGVyaXBoZXJhbHMuXG4gKlxuICogVGhlIHBsdWdpbiBwcm92aWRlcyBhIHNpbXBsZSBKYXZhU2NyaXB0IEFQSSBmb3IgaU9TIGFuZCBBbmRyb2lkLlxuICpcbiAqIC0gU2NhbiBmb3IgcGVyaXBoZXJhbHNcbiAqIC0gQ29ubmVjdCB0byBhIHBlcmlwaGVyYWxcbiAqIC0gUmVhZCB0aGUgdmFsdWUgb2YgYSBjaGFyYWN0ZXJpc3RpY1xuICogLSBXcml0ZSBuZXcgdmFsdWUgdG8gYSBjaGFyYWN0ZXJpc3RpY1xuICogLSBHZXQgbm90aWZpZWQgd2hlbiBjaGFyYWN0ZXJpc3RpYydzIHZhbHVlIGNoYW5nZXNcbiAqXG4gKiBBZHZlcnRpc2luZyBpbmZvcm1hdGlvbiBpcyByZXR1cm5lZCB3aGVuIHNjYW5uaW5nIGZvciBwZXJpcGhlcmFscy4gU2VydmljZSwgY2hhcmFjdGVyaXN0aWMsIGFuZCBwcm9wZXJ0eSBpbmZvIGlzIHJldHVybmVkIHdoZW4gY29ubmVjdGluZyB0byBhIHBlcmlwaGVyYWwuIEFsbCBhY2Nlc3MgaXMgdmlhIHNlcnZpY2UgYW5kIGNoYXJhY3RlcmlzdGljIFVVSURzLiBUaGUgcGx1Z2luIG1hbmFnZXMgaGFuZGxlcyBpbnRlcm5hbGx5LlxuICpcbiAqIFNpbXVsdGFuZW91cyBjb25uZWN0aW9ucyB0byBtdWx0aXBsZSBwZXJpcGhlcmFscyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqIEB1c2FnZVxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqXG4gKiBpbXBvcnQgeyBCTEUgfSBmcm9tICdAaW9uaWMtbmF0aXZlL2JsZS9uZ3gnO1xuICpcbiAqIGNvbnN0cnVjdG9yKHByaXZhdGUgYmxlOiBCTEUpIHsgfVxuICpcbiAqIGBgYFxuICpcbiAqICMjIFBlcmlwaGVyYWwgRGF0YVxuICpcbiAqIFBlcmlwaGVyYWwgRGF0YSBpcyBwYXNzZWQgdG8gdGhlIHN1Y2Nlc3MgY2FsbGJhY2sgd2hlbiBzY2FubmluZyBhbmQgY29ubmVjdGluZy4gTGltaXRlZCBkYXRhIGlzIHBhc3NlZCB3aGVuIHNjYW5uaW5nLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqICAge1xuICogICAgICAgJ25hbWUnOiAnQmF0dGVyeSBEZW1vJyxcbiAqICAgICAgICdpZCc6ICcyMDpGRjpEMDpGRjpEMTpDMCcsXG4gKiAgICAgICAnYWR2ZXJ0aXNpbmcnOiBbMiwxLDYsMywzLDE1LDI0LDgsOSw2Niw5NywxMTYsMTE2LDEwMSwxMTQsMTIxXSxcbiAqICAgICAgICdyc3NpJzogLTU1XG4gKiAgIH1cbiAqIGBgYFxuICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHBlcmlwaGVyYWwgb2JqZWN0IGFsc28gaW5jbHVkZXMgc2VydmljZSwgY2hhcmFjdGVyaXN0aWMgYW5kIGRlc2NyaXB0b3IgaW5mb3JtYXRpb24uXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogICB7XG4gKiAgICAgICAnbmFtZSc6ICdCYXR0ZXJ5IERlbW8nLFxuICogICAgICAgJ2lkJzogJzIwOkZGOkQwOkZGOkQxOkMwJyxcbiAqICAgICAgICdhZHZlcnRpc2luZyc6IFsyLDEsNiwzLDMsMTUsMjQsOCw5LDY2LDk3LDExNiwxMTYsMTAxLDExNCwxMjFdLFxuICogICAgICAgJ3Jzc2knOiAtNTUsXG4gKiAgICAgICAnc2VydmljZXMnOiBbXG4gKiAgICAgICAgICAgJzE4MDAnLFxuICogICAgICAgICAgICcxODAxJyxcbiAqICAgICAgICAgICAnMTgwZidcbiAqICAgICAgIF0sXG4gKiAgICAgICAnY2hhcmFjdGVyaXN0aWNzJzogW1xuICogICAgICAgICAgIHtcbiAqICAgICAgICAgICAgICAgJ3NlcnZpY2UnOiAnMTgwMCcsXG4gKiAgICAgICAgICAgICAgICdjaGFyYWN0ZXJpc3RpYyc6ICcyYTAwJyxcbiAqICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXMnOiBbXG4gKiAgICAgICAgICAgICAgICAgICAnUmVhZCdcbiAqICAgICAgICAgICAgICAgXVxuICogICAgICAgICAgIH0sXG4gKiAgICAgICAgICAge1xuICogICAgICAgICAgICAgICAnc2VydmljZSc6ICcxODAwJyxcbiAqICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljJzogJzJhMDEnLFxuICogICAgICAgICAgICAgICAncHJvcGVydGllcyc6IFtcbiAqICAgICAgICAgICAgICAgICAgICdSZWFkJ1xuICogICAgICAgICAgICAgICBdXG4gKiAgICAgICAgICAgfSxcbiAqICAgICAgICAgICB7XG4gKiAgICAgICAgICAgICAgICdzZXJ2aWNlJzogJzE4MDEnLFxuICogICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWMnOiAnMmEwNScsXG4gKiAgICAgICAgICAgICAgICdwcm9wZXJ0aWVzJzogW1xuICogICAgICAgICAgICAgICAgICAgJ1JlYWQnXG4gKiAgICAgICAgICAgICAgIF1cbiAqICAgICAgICAgICB9LFxuICogICAgICAgICAgIHtcbiAqICAgICAgICAgICAgICAgJ3NlcnZpY2UnOiAnMTgwZicsXG4gKiAgICAgICAgICAgICAgICdjaGFyYWN0ZXJpc3RpYyc6ICcyYTE5JyxcbiAqICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXMnOiBbXG4gKiAgICAgICAgICAgICAgICAgICAnUmVhZCdcbiAqICAgICAgICAgICAgICAgXSxcbiAqICAgICAgICAgICAgICAgJ2Rlc2NyaXB0b3JzJzogW1xuICogICAgICAgICAgICAgICAgICAge1xuICogICAgICAgICAgICAgICAgICAgICAgICd1dWlkJzogJzI5MDEnXG4gKiAgICAgICAgICAgICAgICAgICB9LFxuICogICAgICAgICAgICAgICAgICAge1xuICogICAgICAgICAgICAgICAgICAgICAgICd1dWlkJzogJzI5MDQnXG4gKiAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgIF1cbiAqICAgICAgICAgICB9XG4gKiAgICAgICBdXG4gKiAgIH1cbiAqIGBgYFxuICpcbiAqICMjIEFkdmVydGlzaW5nIERhdGFcbiAqIEJsdWV0b290aCBhZHZlcnRpc2luZyBkYXRhIGlzIHJldHVybmVkIGluIHdoZW4gc2Nhbm5pbmcgZm9yIGRldmljZXMuIFRoZSBmb3JtYXQgdmFyaWVzIGRlcGVuZGluZyBvbiB5b3VyIHBsYXRmb3JtLiBPbiBBbmRyb2lkIGFkdmVydGlzaW5nIGRhdGEgd2lsbCBiZSB0aGUgcmF3IGFkdmVydGlzaW5nIGJ5dGVzLiBpT1MgZG9lcyBub3QgYWxsb3cgYWNjZXNzIHRvIHJhdyBhZHZlcnRpc2luZyBkYXRhLCBzbyBhIGRpY3Rpb25hcnkgb2YgZGF0YSBpcyByZXR1cm5lZC5cbiAqXG4gKiBUaGUgYWR2ZXJ0aXNpbmcgaW5mb3JtYXRpb24gZm9yIGJvdGggQW5kcm9pZCBhbmQgaU9TIGFwcGVhcnMgdG8gYmUgYSBjb21iaW5hdGlvbiBvZiBhZHZlcnRpc2luZyBkYXRhIGFuZCBzY2FuIHJlc3BvbnNlIGRhdGEuXG4gKlxuICogIyMjIEFuZHJvaWRcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAgIHtcbiAqICAgICAgICduYW1lJzogJ2RlbW8nLFxuICogICAgICAgJ2lkJzogJzAwOjFBOjdEOkRBOjcxOjEzJyxcbiAqICAgICAgICdhZHZlcnRpc2luZyc6IEFycmF5QnVmZmVyLFxuICogICAgICAncnNzaSc6IC0zN1xuICogIH1cbiAqIGBgYFxuICpcbiAqIENvbnZlcnQgdGhlIGFkdmVydGlzaW5nIGluZm8gdG8gYSBVaW50OEFycmF5IGZvciBwcm9jZXNzaW5nLiBgdmFyIGFkRGF0YSA9IG5ldyBVaW50OEFycmF5KHBlcmlwaGVyYWwuYWR2ZXJ0aXNpbmcpYFxuICpcbiAqICMjIyBpT1NcbiAqXG4gKiBOb3RlIHRoYXQgaU9TIHVzZXMgdGhlIHN0cmluZyB2YWx1ZSBvZiB0aGUgY29uc3RhbnRzIGZvciB0aGUgW0FkdmVydGlzZW1lbnQgRGF0YSBSZXRyaWV2YWwgS2V5c10oaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvaW9zL2RvY3VtZW50YXRpb24vQ29yZUJsdWV0b290aC9SZWZlcmVuY2UvQ0JDZW50cmFsTWFuYWdlckRlbGVnYXRlX1Byb3RvY29sL2luZGV4Lmh0bWwjLy9hcHBsZV9yZWYvZG9jL2NvbnN0YW50X2dyb3VwL0FkdmVydGlzZW1lbnRfRGF0YV9SZXRyaWV2YWxfS2V5cykuIFRoaXMgd2lsbCBsaWtlbHkgY2hhbmdlIGluIHRoZSBmdXR1cmUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogICB7XG4gKiAgICAgICAnbmFtZSc6ICdkZW1vJyxcbiAqICAgICAgICdpZCc6ICdEODQ3OUE0Ri03NTE3LUJDRDMtOTFCNS0zMzAyQjJGODE4MDInLFxuICogICAgICAgJ2FkdmVydGlzaW5nJzoge1xuICogICAgICAgICAgICdrQ0JBZHZEYXRhQ2hhbm5lbCc6IDM3LFxuICogICAgICAgICAgICdrQ0JBZHZEYXRhU2VydmljZURhdGEnOiB7XG4gKiAgICAgICAgICAgICAgICdGRUQ4Jzoge1xuICogICAgICAgICAgICAgICAgICAgJ2J5dGVMZW5ndGgnOiA3IC8vIGRhdGEgbm90IHNob3duXG4gKiAgICAgICAgICAgICAgIH1cbiAqICAgICAgICAgICB9LFxuICogICAgICAgICAgICdrQ0JBZHZEYXRhTG9jYWxOYW1lJzogJ2RlbW8nLFxuICogICAgICAgICAgICdrQ0JBZHZEYXRhU2VydmljZVVVSURzJzogWydGRUQ4J10sXG4gKiAgICAgICAgICAgJ2tDQkFkdkRhdGFNYW51ZmFjdHVyZXJEYXRhJzoge1xuICogICAgICAgICAgICAgICAnYnl0ZUxlbmd0aCc6IDcgIC8vIGRhdGEgbm90IHNob3duXG4gKiAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAna0NCQWR2RGF0YVR4UG93ZXJMZXZlbCc6IDMyLFxuICogICAgICAgICAgICdrQ0JBZHZEYXRhSXNDb25uZWN0YWJsZSc6IHRydWVcbiAqICAgICAgIH0sXG4gKiAgICAgICAncnNzaSc6IC01M1xuICogICB9XG4gKiBgYGBcbiAqXG4gKiAjIyBUeXBlZCBBcnJheXNcbiAqXG4gKiBUaGlzIHBsdWdpbiB1c2VzIHR5cGVkIEFycmF5cyBvciBBcnJheUJ1ZmZlcnMgZm9yIHNlbmRpbmcgYW5kIHJlY2VpdmluZyBkYXRhLlxuICpcbiAqIFRoaXMgbWVhbnMgdGhhdCB5b3UgbmVlZCBjb252ZXJ0IHlvdXIgZGF0YSB0byBBcnJheUJ1ZmZlcnMgYmVmb3JlIHNlbmRpbmcgYW5kIGZyb20gQXJyYXlCdWZmZXJzIHdoZW4gcmVjZWl2aW5nLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqICAgLy8gQVNDSUkgb25seVxuICogICBmdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cmluZykge1xuICogICAgICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShzdHJpbmcubGVuZ3RoKTtcbiAqICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gKiAgICAgICAgICBhcnJheVtpXSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICogICAgICAgfVxuICogICAgICAgcmV0dXJuIGFycmF5LmJ1ZmZlcjtcbiAqICAgfVxuICpcbiAqICAgLy8gQVNDSUkgb25seVxuICogICBmdW5jdGlvbiBieXRlc1RvU3RyaW5nKGJ1ZmZlcikge1xuICogICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gKiAgIH1cbiAqIGBgYFxuICogWW91IGNhbiByZWFkIG1vcmUgYWJvdXQgdHlwZWQgYXJyYXlzIGluIHRoZXNlIGFydGljbGVzIG9uIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvVHlwZWRfYXJyYXlzKSBhbmQgW0hUTUw1IFJvY2tzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy93ZWJnbC90eXBlZF9hcnJheXMvKS5cbiAqXG4gKiAjIyBVVUlEc1xuICpcbiAqIFVVSURzIGFyZSBhbHdheXMgc3RyaW5ncyBhbmQgbm90IG51bWJlcnMuIFNvbWUgMTYtYml0IFVVSURzLCBzdWNoIGFzICcyMjIwJyBsb29rIGxpa2UgaW50ZWdlcnMsIGJ1dCB0aGV5J3JlIG5vdC4gKFRoZSBpbnRlZ2VyIDIyMjAgaXMgMHg4QUMgaW4gaGV4LikgVGhpcyBpc24ndCBhIHByb2JsZW0gd2l0aCAxMjggYml0IFVVSURzIHNpbmNlIHRoZXkgbG9vayBsaWtlIHN0cmluZ3MgODJiOWU2ZTEtNTkzYS00NTZmLWJlOWItOTIxNTE2MGViY2FjLiBBbGwgMTYtYml0IFVVSURzIHNob3VsZCBhbHNvIGJlIHBhc3NlZCB0byBtZXRob2RzIGFzIHN0cmluZ3MuXG4gKlxuICogQGludGVyZmFjZXNcbiAqIEJMRVNjYW5PcHRpb25zXG4gKi9cbkBQbHVnaW4oe1xuICBwbHVnaW5OYW1lOiAnQkxFJyxcbiAgcGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYmxlLWNlbnRyYWwnLFxuICBwbHVnaW5SZWY6ICdibGUnLFxuICByZXBvOiAnaHR0cHM6Ly9naXRodWIuY29tL2Rvbi9jb3Jkb3ZhLXBsdWdpbi1ibGUtY2VudHJhbCcsXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBCTEUgZXh0ZW5kcyBJb25pY05hdGl2ZVBsdWdpbiB7XG4gIC8qKlxuICAgKiBTY2FuIGFuZCBkaXNjb3ZlciBCTEUgcGVyaXBoZXJhbHMgZm9yIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRpbWUuXG4gICAqXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogQkxFLnNjYW4oW10sIDUpLnN1YnNjcmliZShkZXZpY2UgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRldmljZSkpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzICBMaXN0IG9mIHNlcnZpY2UgVVVJRHMgdG8gZGlzY292ZXIsIG9yIGBbXWAgdG8gZmluZCBhbGwgZGV2aWNlc1xuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vjb25kcyAgTnVtYmVyIG9mIHNlY29uZHMgdG8gcnVuIGRpc2NvdmVyeVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxhbnk+fSBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBvZiBlYWNoIHBlcmlwaGVyYWwgdGhhdCBpcyBkaXNjb3ZlcmVkIGR1cmluZyB0aGUgc3BlY2lmaWVkIHRpbWUuXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcbiAgfSlcbiAgc2NhbihzZXJ2aWNlczogc3RyaW5nW10sIHNlY29uZHM6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjYW4gYW5kIGRpc2NvdmVyIEJMRSBwZXJpcGhlcmFscyB1bnRpbCBgc3RvcFNjYW5gIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHVzYWdlXG4gICAqIGBgYFxuICAgKiBCTEUuc3RhcnRTY2FuKFtdKS5zdWJzY3JpYmUoZGV2aWNlID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShkZXZpY2UpKTtcbiAgICogfSk7XG4gICAqXG4gICAqIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgKiAgIEJMRS5zdG9wU2NhbigpO1xuICAgKiB9LCA1MDAwKTtcbiAgICogYGBgXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzICBMaXN0IG9mIHNlcnZpY2UgVVVJRHMgdG8gZGlzY292ZXIsIG9yIGBbXWAgdG8gZmluZCBhbGwgZGV2aWNlc1xuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxhbnk+fSBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBub3RpZmllcyBvZiBlYWNoIHBlcmlwaGVyYWwgZGlzY292ZXJlZC5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxuICAgIGNsZWFyRnVuY3Rpb246ICdzdG9wU2NhbicsXG4gICAgY2xlYXJXaXRoQXJnczogZmFsc2UsXG4gIH0pXG4gIHN0YXJ0U2NhbihzZXJ2aWNlczogc3RyaW5nW10pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FucyBmb3IgQkxFIGRldmljZXMuIFRoaXMgZnVuY3Rpb24gb3BlcmF0ZXMgc2ltaWxhcmx5IHRvIHRoZSBgc3RhcnRTY2FuYCBmdW5jdGlvbiwgYnV0IGFsbG93cyB5b3UgdG8gc3BlY2lmeSBleHRyYSBvcHRpb25zIChsaWtlIGFsbG93aW5nIGR1cGxpY2F0ZSBkZXZpY2UgcmVwb3J0cykuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzICBMaXN0IG9mIHNlcnZpY2UgVVVJRHMgdG8gZGlzY292ZXIsIG9yIGBbXWAgdG8gZmluZCBhbGwgZGV2aWNlc1xuICAgKiBAcGFyYW0ge0JMRVNjYW5PcHRpb25zfSBvcHRpb25zIE9wdGlvbnNcbiAgICogQHJldHVybnMge09ic2VydmFibGU8YW55Pn0gUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbm90aWZpZXMgb2YgZWFjaCBwZXJpcGhlcmFsIGRpc2NvdmVyZWQuXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcFNjYW4nLFxuICAgIGNsZWFyV2l0aEFyZ3M6IGZhbHNlLFxuICB9KVxuICBzdGFydFNjYW5XaXRoT3B0aW9ucyhzZXJ2aWNlczogc3RyaW5nW10sIG9wdGlvbnM6IEJMRVNjYW5PcHRpb25zKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBhIHNjYW4gc3RhcnRlZCBieSBgc3RhcnRTY2FuYC5cbiAgICpcbiAgICogQHVzYWdlXG4gICAqIGBgYFxuICAgKiBCTEUuc3RhcnRTY2FuKFtdKS5zdWJzY3JpYmUoZGV2aWNlID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShkZXZpY2UpKTtcbiAgICogfSk7XG4gICAqIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgKiAgIEJMRS5zdG9wU2NhbigpLnRoZW4oKCkgPT4geyBjb25zb2xlLmxvZygnc2NhbiBzdG9wcGVkJyk7IH0pO1xuICAgKiB9LCA1MDAwKTtcbiAgICogYGBgXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHN0b3BTY2FuKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkZXZpY2UgcGluLlxuICAgKiBAdXNhZ2VcbiAgICogYGBgXG4gICAqICAgQkxFLnNldFBpbihwaW4pLnN1YnNjcmliZShzdWNjZXNzID0+IHtcbiAgICogICAgIGNvbnNvbGUubG9nKHN1Y2Nlc3MpO1xuICAgKiAgIH0sXG4gICAqICAgZmFpbHVyZSA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZygnZmFpbHVyZScpO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBpbiBQaW4gb2YgdGhlIGRldmljZSBhcyBhIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59IFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIG9mIHN1Y2Nlc3MvZmFpbHVyZS5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxuICB9KVxuICBzZXRQaW4ocGluOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25uZWN0IHRvIGEgcGVyaXBoZXJhbC5cbiAgICogQHVzYWdlXG4gICAqIGBgYFxuICAgKiAgIEJMRS5jb25uZWN0KCcxMjozNDo1Njo3ODo5QTpCQycpLnN1YnNjcmliZShwZXJpcGhlcmFsRGF0YSA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZyhwZXJpcGhlcmFsRGF0YSk7XG4gICAqICAgfSxcbiAgICogICBwZXJpcGhlcmFsRGF0YSA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZygnZGlzY29ubmVjdGVkJyk7XG4gICAqICAgfSk7XG4gICAqIGBgYFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59IFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIG9mIGNvbm5lY3QvZGlzY29ubmVjdC5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxuICAgIGNsZWFyRnVuY3Rpb246ICdkaXNjb25uZWN0JyxcbiAgICBjbGVhcldpdGhBcmdzOiB0cnVlLFxuICB9KVxuICBjb25uZWN0KGRldmljZUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFc3RhYmxpc2ggYW4gYXV0b21hdGljIGNvbm5lY3Rpb24gdG8gYSBwZXJpcGhlcmFsLiBUaGUgcGhvbmUgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbm5lY3QgdG8gdGhlIEJsdWV0b290aCBwZXJpcGhlcmFsXG4gICAqIHdoZW5ldmVyIGl0IGlzIGluIHJhbmdlLiBUaGUgYXV0b0Nvbm5lY3QgZnVuY3Rpb24gdXNlcyBjYWxsYmFja3MgaW5zdGVhZCBvZiBvYnNlcnZhYmxlcyBiZWNhdXNlIGNvbm5lY3QgYW5kXG4gICAqIGRpc2Nvbm5lY3QgY2FuIGVhY2ggYmUgY2FsbGVkIG1hbnkgdGltZXMgYXMgYSBkZXZpY2VzIGNvbm5lY3RzIGFuZCBkaXNjb25uZWN0cy5cbiAgICpcbiAgICogT24gQW5kcm9pZCB5b3UgY2FuIHBhc3MgYSBNQUMgYWRkcmVzcyBkaXJlY3RseSB0byBhdXRvQ29ubmVjdC4gV2l0aCBpT1MsIHlvdSBuZWVkIHRvIGdldCBhIGRldmljZSBpZCBieSBzY2FubmluZyxcbiAgICogY2FsbGluZyBibGUucGVyaXBoZXJhbHNXaXRoSWRlbnRpZmllcnMsIG9yIGNhbGxpbmcgYmxlLmNvbm5lY3RlZFBlcmlwaGVyYWxzV2l0aFNlcnZpY2VzLlxuICAgKlxuICAgKiBAdXNhZ2VcbiAgICogYGBgXG4gICAqICBzb21lRnVuY3Rpb24oKSB7XG4gICAqICAgIHRoaXMuYmxlLmF1dG9Db25uZWN0KGRldmljZUlkLCBvbkNvbm5lY3RlZC5iaW5kKHRoaXMpLCBvbkRpc2Nvbm5lY3RlZC5iaW5kKHRoaXMpKTtcbiAgICogIH1cbiAgICpcbiAgICogIG9uQ29ubmVjdGVkKHBlcmlwaGVyYWwpIHtcbiAgICogICAgY29uc29sZS5sb2coYENvbm5lY3RlZCB0byAke3BlcmlwaGVyYWwuaWR9YClsXG4gICAqICB9XG4gICAqXG4gICAqICBvbkRpc2Nvbm5lY3RlZChwZXJpcGhlcmFsKSB7XG4gICAqICAgIGNvbnNvbGUubG9nKGBEaXNjb25uZWN0ZWQgZnJvbSAke3BlcmlwaGVyYWwuaWR9YClsXG4gICAqICB9XG4gICAqXG4gICAqIGBgYFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgVVVJRCBvciBNQUMgYWRkcmVzcyBvZiB0aGUgcGVyaXBoZXJhbFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjb25uZWN0Q2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCBwZXJpcGhlcmFsIGRhdGEgd2hlbiB0aGUgZGV2aWNlcyBjb25uZWN0c1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBkaXNjb25uZWN0Q2FsbGJhY2sgIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggcGVyaXBoZXJhbCBkYXRhIHdoZW4gdGhlIGRldmljZXMgZGlzY29ubmVjdHNcbiAgICovXG4gIEBDb3Jkb3ZhKHsgc3luYzogdHJ1ZSB9KVxuICBhdXRvQ29ubmVjdChkZXZpY2VJZDogc3RyaW5nLCBjb25uZWN0Q2FsbGJhY2s6IGFueSwgZGlzY29ubmVjdENhbGxiYWNrOiBhbnkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBNVFUgc2l6ZS5cbiAgICogTWF5IGJlIHVzZWQgdG8gZml4IHRoZSBFcnJvciAxNCBcIlVubGlrZWx5XCIgb24gd3JpdGUgcmVxdWVzdHMgd2l0aCBtb3JlIHRoYW4gMjAgYnl0ZXMuXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogICBCTEUucmVxdWVzdE10dSgnMTI6MzQ6NTY6Nzg6OUE6QkMnLCA1MTIpLnRoZW4oKCkgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coJ01UVSBTaXplIEFjY2VwdGVkJyk7XG4gICAqICAgfSwgZXJyb3IgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coJ01UVSBTaXplIEZhaWxlZCcpO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcbiAgICogQHBhcmFtIHtudW1iZXJ9IG10dVNpemUgVGhlIG5ldyBNVFUgc2l6ZS4gKDIzIC0gNTE3LCBkZWZhdWx0IGlzIHVzdWFsbHkgMjMuIE1heCByZWNvbW1lbmRlZDogNTEyKVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBQcm9taXNlLlxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZXF1ZXN0TXR1KGRldmljZUlkOiBzdHJpbmcsIG10dVNpemU6IG51bWJlcik6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2ggRGV2aWNlIENhY2hlXG4gICAqIFRoaXMgbWV0aG9kIG1heSBmaXggYSBpc3N1ZSBvZiBvbGQgY2FjaGVkIHNlcnZpY2VzIGFuZCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAqIE5PVEUgU2luY2UgdGhpcyB1c2VzIGFuIHVuZG9jdW1lbnRlZCBBUEkgaXQncyBub3QgZ3VhcmFudGVlZCB0byB3b3JrLlxuICAgKiBJZiB5b3UgY2hvb3NlIGEgdG9vIGxvdyBkZWxheSB0aW1lICh0aW1lb3V0TWlsbGlzKSB0aGUgbWV0aG9kIGNvdWxkIGZhaWwuXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogICBCTEUucmVmcmVzaERldmljZUNhY2hlKCcxMjozNDo1Njo3ODo5QTpCQycsIDEwMDAwKS50aGVuKGRpc2NvdmVyZWRTZXJ2aWNlcyA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZygnVGhlIG5ldyBkaXNjb3ZlcmVkIHNlcnZpY2VzIGFmdGVyIHRoZSBjbGVhbjogJywgZGlzY292ZXJlZFNlcnZpY2VzKTtcbiAgICogICB9LCBlcnJvciA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZygnUmVmcmVzaCBkZXZpY2UgY2FjaGUgZmFpbGVkLicpO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRNaWxsaXMgRGVsYXkgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIHJlZnJlc2ggYmVmb3JlIGRpc2NvdmVyaW5nIHNlcnZpY2VzLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBQcm9taXNlLlxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZWZyZXNoRGV2aWNlQ2FjaGUoZGV2aWNlSWQ6IHN0cmluZywgdGltZW91dE1pbGxpczogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCBmcm9tIGEgcGVyaXBoZXJhbC5cbiAgICogQHVzYWdlXG4gICAqIGBgYFxuICAgKiAgIEJMRS5kaXNjb25uZWN0KCcxMjozNDo1Njo3ODo5QTpCQycpLnRoZW4oKCkgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coJ0Rpc2Nvbm5lY3RlZCcpO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2VcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZGlzY29ubmVjdChkZXZpY2VJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmVhZCB0aGUgdmFsdWUgb2YgYSBjaGFyYWN0ZXJpc3RpYy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlVVVJRCAgVVVJRCBvZiB0aGUgQkxFIHNlcnZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2VcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgcmVhZChkZXZpY2VJZDogc3RyaW5nLCBzZXJ2aWNlVVVJRDogc3RyaW5nLCBjaGFyYWN0ZXJpc3RpY1VVSUQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlIHRoZSB2YWx1ZSBvZiBhIGNoYXJhY3RlcmlzdGljLlxuICAgKiBAdXNhZ2VcbiAgICogYGBgXG4gICAqIC8vIHNlbmQgMSBieXRlIHRvIHN3aXRjaCBhIGxpZ2h0IG9uXG4gICAqIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAqIGRhdGFbMF0gPSAxO1xuICAgKiBCTEUud3JpdGUoZGV2aWNlX2lkLCAnRkYxMCcsICdGRjExJywgZGF0YS5idWZmZXIpO1xuICAgKlxuICAgKiAvLyBzZW5kIGEgMyBieXRlIHZhbHVlIHdpdGggUkdCIGNvbG9yXG4gICAqIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoMyk7XG4gICAqIGRhdGFbMF0gPSAweEZGOyAgLy8gcmVkXG4gICAqIGRhdGFbMF0gPSAweDAwOyAvLyBncmVlblxuICAgKiBkYXRhWzBdID0gMHhGRjsgLy8gYmx1ZVxuICAgKiBCTEUud3JpdGUoZGV2aWNlX2lkLCAnY2NjMCcsICdjY2MxJywgZGF0YS5idWZmZXIpO1xuICAgKlxuICAgKiAvLyBzZW5kIGEgMzIgYml0IGludGVnZXJcbiAgICogdmFyIGRhdGEgPSBuZXcgVWludDMyQXJyYXkoMSk7XG4gICAqIGRhdGFbMF0gPSBjb3VudGVySW5wdXQudmFsdWU7XG4gICAqIEJMRS53cml0ZShkZXZpY2VfaWQsIFNFUlZJQ0UsIENIQVJBQ1RFUklTVElDLCBkYXRhLmJ1ZmZlcik7XG4gICAqXG4gICAqIGBgYFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VVVUlEICBVVUlEIG9mIHRoZSBCTEUgc2VydmljZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyaXN0aWNVVUlEICBVVUlEIG9mIHRoZSBCTEUgY2hhcmFjdGVyaXN0aWNcbiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gdmFsdWUgIERhdGEgdG8gd3JpdGUgdG8gdGhlIGNoYXJhY3RlcmlzdGljLCBhcyBhbiBBcnJheUJ1ZmZlci5cbiAgICogQHJldHVybiB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgUHJvbWlzZVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICB3cml0ZShkZXZpY2VJZDogc3RyaW5nLCBzZXJ2aWNlVVVJRDogc3RyaW5nLCBjaGFyYWN0ZXJpc3RpY1VVSUQ6IHN0cmluZywgdmFsdWU6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogV3JpdGUgdGhlIHZhbHVlIG9mIGEgY2hhcmFjdGVyaXN0aWMgd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgcGVyaXBoZXJhbC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlVVVJRCAgVVVJRCBvZiB0aGUgQkxFIHNlcnZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXG4gICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IHZhbHVlICBEYXRhIHRvIHdyaXRlIHRvIHRoZSBjaGFyYWN0ZXJpc3RpYywgYXMgYW4gQXJyYXlCdWZmZXIuXG4gICAqIEByZXR1cm4ge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIFByb21pc2VcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgd3JpdGVXaXRob3V0UmVzcG9uc2UoXG4gICAgZGV2aWNlSWQ6IHN0cmluZyxcbiAgICBzZXJ2aWNlVVVJRDogc3RyaW5nLFxuICAgIGNoYXJhY3RlcmlzdGljVVVJRDogc3RyaW5nLFxuICAgIHZhbHVlOiBBcnJheUJ1ZmZlclxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB0byBiZSBub3RpZmllZCB3aGVuIHRoZSB2YWx1ZSBvZiBhIGNoYXJhY3RlcmlzdGljIGNoYW5nZXMuXG4gICAqXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogQkxFLnN0YXJ0Tm90aWZpY2F0aW9uKGRldmljZV9pZCwgJ0ZGMTAnLCAnRkYxMScpLnN1YnNjcmliZShidWZmZXIgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlVVVJRCAgVVVJRCBvZiB0aGUgQkxFIHNlcnZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlcmlzdGljVVVJRCAgVVVJRCBvZiB0aGUgQkxFIGNoYXJhY3RlcmlzdGljXG4gICAqIEByZXR1cm4ge09ic2VydmFibGU8YW55Pn0gUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbm90aWZpZXMgb2YgY2hhcmFjdGVyaXN0aWMgY2hhbmdlcy5cbiAgICogVGhlIG9ic2VydmVyIGVtaXQgYW4gYXJyYXkgd2l0aCBkYXRhIGF0IGluZGV4IDAgYW5kIHNlcXVlbmNlIG9yZGVyIGF0IGluZGV4IDEuXG4gICAqIFRoZSBzZXF1ZW5jZSBvcmRlciBpcyBhbHdheXMgdW5kZWZpbmVkIG9uIGlPUy4gT24gYW5kcm9pZCBpdCBsZWF2ZSB0aGUgY2xpZW50IHRvIGNoZWNrIHRoZSBzZXF1ZW5jZSBvcmRlciBhbmQgcmVvcmRlciBpZiBuZWVkZWRcbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBvYnNlcnZhYmxlOiB0cnVlLFxuICAgIGRlc3RydWN0OiB0cnVlLFxuICAgIGNsZWFyRnVuY3Rpb246ICdzdG9wTm90aWZpY2F0aW9uJyxcbiAgICBjbGVhcldpdGhBcmdzOiB0cnVlLFxuICB9KVxuICBzdGFydE5vdGlmaWNhdGlvbihkZXZpY2VJZDogc3RyaW5nLCBzZXJ2aWNlVVVJRDogc3RyaW5nLCBjaGFyYWN0ZXJpc3RpY1VVSUQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgYmVpbmcgbm90aWZpZWQgd2hlbiB0aGUgdmFsdWUgb2YgYSBjaGFyYWN0ZXJpc3RpYyBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgIFVVSUQgb3IgTUFDIGFkZHJlc3Mgb2YgdGhlIHBlcmlwaGVyYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VVVUlEICBVVUlEIG9mIHRoZSBCTEUgc2VydmljZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyaXN0aWNVVUlEICBVVUlEIG9mIHRoZSBCTEUgY2hhcmFjdGVyaXN0aWNcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc3RvcE5vdGlmaWNhdGlvbihkZXZpY2VJZDogc3RyaW5nLCBzZXJ2aWNlVVVJRDogc3RyaW5nLCBjaGFyYWN0ZXJpc3RpY1VVSUQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydCB0aGUgY29ubmVjdGlvbiBzdGF0dXMuXG4gICAqXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogQkxFLmlzQ29ubmVjdGVkKCdGRkNBMEIwOS1DQjFELTREQzAtQTFFRi0zMUFGRDNFREZCNTMnKS50aGVuKFxuICAgKiAgICgpID0+IHsgY29uc29sZS5sb2coJ2Nvbm5lY3RlZCcpOyB9LFxuICAgKiAgICgpID0+IHsgY29uc29sZS5sb2coJ25vdCBjb25uZWN0ZWQnKTsgfVxuICAgKiApO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGlzQ29ubmVjdGVkKGRldmljZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnQgaWYgYmx1ZXRvb3RoIGlzIGVuYWJsZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIEJsdWV0b290aCBpcyBlbmFibGVkLCBhbmQgcmVqZWN0cyBpZiBkaXNhYmxlZC5cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgaXNFbmFibGVkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB0byBiZSBub3RpZmllZCB3aGVuIEJsdWV0b290aCBzdGF0ZSBjaGFuZ2VzIG9uIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEB1c2FnZVxuICAgKiBgYGBcbiAgICogQkxFLnN0YXJ0U3RhdGVOb3RpZmljYXRpb25zKCkuc3Vic2NyaWJlKHN0YXRlID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhcIkJsdWV0b290aCBpcyBcIiArIHN0YXRlKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59IFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIHdoZW4gdGhlIEJsdWV0b290aCBpcyBlbmFibGVkIG9yIGRpc2FibGVkIG9uIHRoZSBkZXZpY2UuXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcFN0YXRlTm90aWZpY2F0aW9ucycsXG4gICAgY2xlYXJXaXRoQXJnczogZmFsc2UsXG4gIH0pXG4gIHN0YXJ0U3RhdGVOb3RpZmljYXRpb25zKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3Agc3RhdGUgbm90aWZpY2F0aW9ucy5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc3RvcFN0YXRlTm90aWZpY2F0aW9ucygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIFN5c3RlbSBCbHVldG9vdGggc2V0dGluZ3MgKEFuZHJvaWQgb25seSkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHNob3dCbHVldG9vdGhTZXR0aW5ncygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgQmx1ZXRvb3RoIG9uIHRoZSBkZXZpY2UgKEFuZHJvaWQgb25seSkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGVuYWJsZSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkIHRoZSBSU1NJIHZhbHVlIG9uIHRoZSBkZXZpY2UgY29ubmVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUlkICBVVUlEIG9yIE1BQyBhZGRyZXNzIG9mIHRoZSBwZXJpcGhlcmFsXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHJlYWRSU1NJKGRldmljZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYSBsaXN0IG9mIHRoZSBwZXJpcGhlcmFscyAoY29udGFpbmluZyBhbnkgb2YgdGhlIHNwZWNpZmllZCBzZXJ2aWNlcylcbiAgICogY3VycmVudGx5IGNvbm5lY3RlZCB0byB0aGUgc3lzdGVtLiBUaGUgcGVyaXBoZXJhbCBsaXN0IGlzIHNlbnQgdG8gdGhlIHN1Y2Nlc3MgY2FsbGJhY2suXG4gICAqIGlPUyBvbmx5XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlcnZpY2VzIExpc3Qgb2Ygc2VydmljZXMgdG8gZGlzY292ZXJcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0gUmV0dXJucyBhIHByb21pc2Ugd2l0aCBhIGxpc3Qgb2YgcGVyaXBoZXJhbCBvYmplY3RzXG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGNvbm5lY3RlZFBlcmlwaGVyYWxzV2l0aFNlcnZpY2VzKHNlcnZpY2VzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgY29ubmVjdGVkIHBlcmlwaGVyYWxzIG9mZmVyaW5nIHRoZSBsaXN0ZWQgc2VydmljZSBVVUlEcy5cbiAgICogaU9TIG9ubHlcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdXVpZHMgTGlzdCBvZiBwZXJpcGhlcmFsIFVVSURzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IFJldHVybnMgYSBwcm9taXNlIHdpdGggYSBsaXN0IG9mIHBlcmlwaGVyYWwgb2JqZWN0c1xuICAgKi9cbiAgQENvcmRvdmEoKVxuICBwZXJpcGhlcmFsc1dpdGhJZGVudGlmaWVycyh1dWlkczogc3RyaW5nW10pOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIGJvbmRlZCBkZXZpY2VzXG4gICAqIEFuZHJvaWQgb25seVxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGEgbGlzdCBvZiBwZXJpcGhlcmFsIG9iamVjdHNcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgYm9uZGVkRGV2aWNlcygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgaWYgbG9jYXRpb24gc2VydmljZXMgYXJlIGVuYWJsZWQuXG4gICAqIEFuZHJvaWQgb25seVxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgaXNMb2NhdGlvbkVuYWJsZWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuO1xuICB9XG59XG4iXX0=