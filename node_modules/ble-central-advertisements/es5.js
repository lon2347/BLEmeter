(()=>{"use strict";var _={d:(E,e)=>{for(var I in e)_.o(e,I)&&!_.o(E,I)&&Object.defineProperty(E,I,{enumerable:!0,get:e[I]})},o:(_,E)=>Object.prototype.hasOwnProperty.call(_,E),r:_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})}},E={};_.r(E),_.d(E,{AdvertisementDecoder:()=>AdvertisementDecoder,Convert:()=>t,GapAdvertisementFlagType:()=>e,GapAttributeCode:()=>I,isGapAdvertisementFlagRaised:()=>R,isIOSAdvertisingData:()=>c,parseAdvertisementManufacturerMetadata:()=>s,parseGapAttributesDictionary:()=>N,parseGapAttributesMetadata:()=>o,parseGapAttributesMetadataFromDictionary:()=>U});var e,I,t={};function a(_){return"object"==typeof _&&null!==_}function S(_){return void 0===_}function A(_){return function(_){return"number"==typeof _&&!Number.isNaN(_)}(_)&&_%1==0}function T(_){return a(_)&&_ instanceof ArrayBuffer}function D(_){return a(_)&&_ instanceof Uint8Array}function r(_){return A(_)?(255&_).toString(16).padStart(2,"0"):"00"}function n(_){return D(_)?(new TextDecoder).decode(_.buffer):""}function O(_){if("string"!=typeof _)return[];const E=/^[A-Fa-f0-9]+$/.exec(_);if(!E)return[];let e=E[0];return e.length%2!=0&&(e="0"+e),Array.from(e.match(/.{2}/g))}function i(_){const E=O(_),e=[];for(let _=0;_<E.length;_++)e[_]=parseInt(E[_],16);return Uint8Array.from(e)}function C(_){if(!D(_))return"";let E=[];for(let e=0;e<_.byteLength;e++)E[e]=r(_[e]);return E.join("")}function L(_){const E=[];if(D(_))for(let e=0;e<_.byteLength;e+=2){const I=_.slice(e,e+2).reverse();E.push(C(I))}return E}function R(_,E){return(_&E)>>>0===E}function N(_){const E={};if(!D(_))return E;let e,I,t,a,S=0;for(;S<_.byteLength&&(e=_[S],A(e)&&!(e<=0));)I=_[S+1],t=S+2,a=t+e-1,E[I]=_.slice(t,a),S=a;return E}function o(_){return function(_){for(const E in _)S(_[E])&&delete _[E];return _}(U(N(_)))}function U(_){return{flags:_[I.FLAGS],incompleteListOfServiceUuids16Bit:_[I.INCOMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT],completeListOfServiceUuids16Bit:_[I.COMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT],incompleteListOfServiceUuids32Bit:_[I.INCOMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT],completeListOfServiceUuids32Bit:_[I.COMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT],incompleteListOfServiceUuids128Bit:_[I.INCOMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT],completeListOfServiceUuids128Bit:_[I.COMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT],localNameShortened:_[I.LOCAL_NAME_SHORTENED],localNameComplete:_[I.LOCAL_NAME_COMPLETE],txPowerLevel:_[I.TX_POWER_LEVEL],deviceClass:_[I.DEVICE_CLASS],simplePairingHashC192:_[I.SIMPLE_PAIRING_HASH_C_192],simplePairingRandomizerR192:_[I.SIMPLE_PAIRING_RANDOMIZER_R_192],deviceId:_[I.DEVICE_ID],securityManagerOutOfBandFlags:_[I.SECURITY_MANAGER_OUT_OF_BAND_FLAGS],slaveConnectionIntervalRange:_[I.SLAVE_CONNECTION_INTERVAL_RANGE],listOfServiceSolicitationUuids16Bit:_[I.LIST_OF_SERVICE_SOLICITATION_UUIDS_16_BIT],listOfServiceSolicitationUuids128Bit:_[I.LIST_OF_SERVICE_SOLICITATION_UUIDS_128_BIT],serviceDataUuid16Bit:_[I.SERVICE_DATA_UUID_16_BIT],targetAddressPublic:_[I.TARGET_ADDRESS_PUBLIC],targetAddressRandom:_[I.TARGET_ADDRESS_RANDOM],appearance:_[I.APPEARANCE],advertisingInterval:_[I.ADVERTISING_INTERVAL],leBluetoothDeviceAddress:_[I.LE_BLUETOOTH_DEVICE_ADDRESS],leRole:_[I.LE_ROLE],simplePairingHashC256:_[I.SIMPLE_PAIRING_HASH_C_256],simplePairingRandomizerR256:_[I.SIMPLE_PAIRING_RANDOMIZER_R_256],listOfServiceSolicitationUuids32Bit:_[I.LIST_OF_SERVICE_SOLICITATION_UUIDS_32_BIT],serviceDataUuid32Bit:_[I.SERVICE_DATA_UUID_32_BIT],serviceDataUuid128Bit:_[I.SERVICE_DATA_UUID_128_BIT],leSecureConnectionsConfirmationValue:_[I.LE_SECURE_CONNECTIONS_CONFIRMATION_VALUE],leSecureConnectionsRandomValue:_[I.LE_SECURE_CONNECTIONS_RANDOM_VALUE],uri:_[I.URI],indoorPositioning:_[I.INDOOR_POSITIONING],transportDiscoveryData:_[I.TRANSPORT_DISCOVERY_DATA],leSupportedFeatures:_[I.LE_SUPPORTED_FEATURES],channelMapUpdateIndication:_[I.CHANNEL_MAP_UPDATE_INDICATION],pbAdv:_[I.PB_ADV],meshMessage:_[I.MESH_MESSAGE],meshBeacon:_[I.MESH_BEACON],bigInfo:_[I.BIG_INFO],broadcastCode:_[I.BROADCAST_CODE],informationData3D:_[I.INFORMATION_DATA_3D],manufacturerSpecificData:_[I.MANUFACTURER_SPECIFIC_DATA]}}function c(_){if(!a(_))return!1;for(const E of["kCBAdvDataChannel","kCBAdvDataLocalName","kCBAdvDataTxPowerLevel","kCBAdvDataIsConnectable","kCBAdvDataServiceUUIDs","kCBAdvDataManufacturerData","kCBAdvDataServiceData"])if(E in _)return!0;return!1}_.r(t),_.d(t,{byteToHex:()=>r,hexToUint8Array:()=>i,splitHex:()=>O,uint8ArrayTo16BitServiceUuids:()=>L,uint8ArrayToHex:()=>C,uint8ArrayToUTF8:()=>n}),function(_){_[_.LE_LIMITED_DISC_MODE=1]="LE_LIMITED_DISC_MODE",_[_.LE_GENERAL_DISC_MODE=2]="LE_GENERAL_DISC_MODE",_[_.BR_EDR_NOT_SUPPORTED=4]="BR_EDR_NOT_SUPPORTED",_[_.LE_BR_EDR_CONTROLLER=8]="LE_BR_EDR_CONTROLLER",_[_.LE_BR_EDR_HOST=16]="LE_BR_EDR_HOST",_[_.LE_ONLY_LIMITED_DISC_MODE=5]="LE_ONLY_LIMITED_DISC_MODE",_[_.LE_ONLY_GENERAL_DISC_MODE=6]="LE_ONLY_GENERAL_DISC_MODE"}(e||(e={})),function(_){_[_.FLAGS=1]="FLAGS",_[_.INCOMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT=2]="INCOMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT",_[_.COMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT=3]="COMPLETE_LIST_OF_SERVICE_UUIDS_16_BIT",_[_.INCOMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT=4]="INCOMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT",_[_.COMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT=5]="COMPLETE_LIST_OF_SERVICE_UUIDS_32_BIT",_[_.INCOMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT=6]="INCOMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT",_[_.COMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT=7]="COMPLETE_LIST_OF_SERVICE_UUIDS_128_BIT",_[_.LOCAL_NAME_SHORTENED=8]="LOCAL_NAME_SHORTENED",_[_.LOCAL_NAME_COMPLETE=9]="LOCAL_NAME_COMPLETE",_[_.TX_POWER_LEVEL=10]="TX_POWER_LEVEL",_[_.DEVICE_CLASS=13]="DEVICE_CLASS",_[_.SIMPLE_PAIRING_HASH_C_192=14]="SIMPLE_PAIRING_HASH_C_192",_[_.SIMPLE_PAIRING_RANDOMIZER_R_192=15]="SIMPLE_PAIRING_RANDOMIZER_R_192",_[_.DEVICE_ID=16]="DEVICE_ID",_[_.SECURITY_MANAGER_OUT_OF_BAND_FLAGS=17]="SECURITY_MANAGER_OUT_OF_BAND_FLAGS",_[_.SLAVE_CONNECTION_INTERVAL_RANGE=18]="SLAVE_CONNECTION_INTERVAL_RANGE",_[_.LIST_OF_SERVICE_SOLICITATION_UUIDS_16_BIT=20]="LIST_OF_SERVICE_SOLICITATION_UUIDS_16_BIT",_[_.LIST_OF_SERVICE_SOLICITATION_UUIDS_128_BIT=21]="LIST_OF_SERVICE_SOLICITATION_UUIDS_128_BIT",_[_.SERVICE_DATA_UUID_16_BIT=22]="SERVICE_DATA_UUID_16_BIT",_[_.TARGET_ADDRESS_PUBLIC=23]="TARGET_ADDRESS_PUBLIC",_[_.TARGET_ADDRESS_RANDOM=24]="TARGET_ADDRESS_RANDOM",_[_.APPEARANCE=25]="APPEARANCE",_[_.ADVERTISING_INTERVAL=26]="ADVERTISING_INTERVAL",_[_.LE_BLUETOOTH_DEVICE_ADDRESS=27]="LE_BLUETOOTH_DEVICE_ADDRESS",_[_.LE_ROLE=28]="LE_ROLE",_[_.SIMPLE_PAIRING_HASH_C_256=29]="SIMPLE_PAIRING_HASH_C_256",_[_.SIMPLE_PAIRING_RANDOMIZER_R_256=30]="SIMPLE_PAIRING_RANDOMIZER_R_256",_[_.LIST_OF_SERVICE_SOLICITATION_UUIDS_32_BIT=31]="LIST_OF_SERVICE_SOLICITATION_UUIDS_32_BIT",_[_.SERVICE_DATA_UUID_32_BIT=32]="SERVICE_DATA_UUID_32_BIT",_[_.SERVICE_DATA_UUID_128_BIT=33]="SERVICE_DATA_UUID_128_BIT",_[_.LE_SECURE_CONNECTIONS_CONFIRMATION_VALUE=34]="LE_SECURE_CONNECTIONS_CONFIRMATION_VALUE",_[_.LE_SECURE_CONNECTIONS_RANDOM_VALUE=35]="LE_SECURE_CONNECTIONS_RANDOM_VALUE",_[_.URI=36]="URI",_[_.INDOOR_POSITIONING=37]="INDOOR_POSITIONING",_[_.TRANSPORT_DISCOVERY_DATA=38]="TRANSPORT_DISCOVERY_DATA",_[_.LE_SUPPORTED_FEATURES=39]="LE_SUPPORTED_FEATURES",_[_.CHANNEL_MAP_UPDATE_INDICATION=40]="CHANNEL_MAP_UPDATE_INDICATION",_[_.PB_ADV=41]="PB_ADV",_[_.MESH_MESSAGE=42]="MESH_MESSAGE",_[_.MESH_BEACON=43]="MESH_BEACON",_[_.BIG_INFO=44]="BIG_INFO",_[_.BROADCAST_CODE=45]="BROADCAST_CODE",_[_.INFORMATION_DATA_3D=61]="INFORMATION_DATA_3D",_[_.MANUFACTURER_SPECIFIC_DATA=255]="MANUFACTURER_SPECIFIC_DATA"}(I||(I={}));class AdvertisementDecoder{constructor(_={}){this.options=_}decode(_,E){let I=a(E)?E:_;if(!a(_))return I;const t=T(_);I===_&&t&&(I={});const S=t?_:_.advertising;if(T(S)){!function(_,E,I){const t=I.useShortenedLocalName?E.localNameShortened:E.localNameComplete;if(_.gap=E,_.advDataLocalName=n(t),_.advDataServiceUUIDs=L(E.completeListOfServiceUuids16Bit),D(E.flags)){const I=_.gapFlags=E.flags[0];_.advDataIsConnectable=R(I,e.LE_GENERAL_DISC_MODE)}D(E.channelMapUpdateIndication)&&(_.advDataChannel=E.channelMapUpdateIndication[0]),D(E.txPowerLevel)&&(_.advDataTxPowerLevel=E.txPowerLevel[0]),D(E.manufacturerSpecificData)&&(_.advDataManufacturerData=E.manufacturerSpecificData)}(I,o(new Uint8Array(S)),this.options)}else c(S)&&(r=S,(A=I).advDataChannel=r.kCBAdvDataChannel,A.advDataLocalName=r.kCBAdvDataLocalName,A.advDataTxPowerLevel=r.kCBAdvDataTxPowerLevel,A.advDataIsConnectable=r.kCBAdvDataIsConnectable,A.advDataServiceUUIDs=r.kCBAdvDataServiceUUIDs,A.advDataManufacturerData=r.kCBAdvDataManufacturerData,A.advDataServiceData=r.kCBAdvDataServiceData);var A,r;return I}}function s(_){let E=0,e=_;return D(_)&&_.byteLength>=2&&(E=new DataView(_.buffer).getUint16(0,!0),e=_.slice(2)),{manufacturerId:E,manufacturerData:e}}module.exports=E})();