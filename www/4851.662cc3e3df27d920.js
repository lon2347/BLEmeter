"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(Z,p,s)=>{s.r(p),s.d(p,{HomePageModule:()=>y});var c=s(9808),o=s(5056),u=s(4182),l=s(2292),h=s(655),t=s(2096),m=s(7011);function f(n,r){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"ion-spinner",12),t.qZA())}function v(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item")(2,"ion-button",13),t.NdJ("click",function(){const d=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.deviceSelected(d))}),t._UZ(3,"ion-icon",14),t.TgZ(4,"ion-label"),t._uU(5),t.qZA()()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(5),t.hij(" ",e.name," ")}}const b=[{path:"",component:(()=>{class n{constructor(e,i,a,d,g,C,M){this.navCtrl=e,this.popover=i,this.router=a,this.alertCtrl=d,this.toastCtrl=g,this.ble=C,this.ngZone=M,this.devices=[],this.isScanning=!1}ngOnInit(){}ionViewDidEnter(){console.log("ionViewDidEnter")}ionViewWillLeave(){}scan(){this.isScanning?console.log("Scan already in progress."):(this.isScanning=!0,this.ble.startScan(["6e400001-b5a3-f393-e0a9-e50e24dc4179"]).subscribe(e=>this.onDeviceDiscovered(e),e=>this.scanError(e)),setTimeout(()=>{this.ble.stopScan().then(()=>{console.log("Scan stopped"),this.isScanning=!1}).catch(e=>{console.error("Error stopping scan",e),this.isScanning=!1})},4e3))}onDeviceDiscovered(e){this.ngZone.run(()=>{this.devices.push(e)})}clear(){this.devices=[]}matchesPattern(e){return/^HT-MA.*$/.test(e)}scanError(e){return(0,h.mG)(this,void 0,void 0,function*(){this.setStatus("Error "+e),(yield this.toastCtrl.create({message:"\u8bf7\u5f00\u542f\u84dd\u7259",position:"middle",duration:3e3})).present()})}setStatus(e){console.log(e),this.ngZone.run(()=>{this.statusMessage=e})}deviceSelected(e){console.log(JSON.stringify(e)+" selected"),this.device=e,this.router.navigate(["sensor"],{state:{device:this.device}})}timeout(e){return new Promise(i=>setTimeout(i,e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.SH),t.Y36(o.Dh),t.Y36(l.F0),t.Y36(o.Br),t.Y36(o.yF),t.Y36(m.I),t.Y36(t.R0b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:17,vars:2,consts:[[1,"fixed-content"],[1,"coverhead"],[1,"tophead"],[1,"logo"],[1,"headtxt"],["class","spinner-container",4,"ngIf"],[1,"devicelist"],[4,"ngFor","ngForOf"],[1,"footer-content"],[1,"ion-margin-end",2,"font-family","ZCKL",3,"click"],[1,"ion-margin-start",2,"font-family","ZCKL",3,"click"],[1,"spinner-container"],["name","circular","color","secondary"],["size","small",3,"click"],["slot","start","name","bluetooth"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content")(1,"div",0),t._UZ(2,"div",1)(3,"div",2)(4,"div",3),t.TgZ(5,"div",4),t._uU(6,"\u84dd\u7259\u7535\u8868"),t.qZA()(),t.YNc(7,f,2,0,"div",5),t.TgZ(8,"ion-list",6),t.YNc(9,v,6,1,"ng-container",7),t.qZA()(),t.TgZ(10,"ion-footer")(11,"ion-toolbar")(12,"div",8)(13,"ion-button",9),t.NdJ("click",function(){return i.scan()}),t._uU(14," \u641c\u7d22 "),t.qZA(),t.TgZ(15,"ion-button",10),t.NdJ("click",function(){return i.clear()}),t._uU(16," \u6e05\u9664 "),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",i.isScanning),t.xp6(2),t.Q6J("ngForOf",i.devices))},dependencies:[c.sg,c.O5,o.YG,o.W2,o.fr,o.gu,o.Ie,o.Q$,o.q_,o.PQ,o.sr],styles:[".fixed-content[_ngcontent-%COMP%]{position:fixed;top:0;width:100%}ion-content[_ngcontent-%COMP%]{opacity:1;--overflow: hidden;--background: rgba(244, 248, 251, 1)}.headtxt[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:3;top:30px;justify-content:center;width:100%;font-size:20px;font-weight:500;letter-spacing:0px;line-height:23.44px;color:#06211a}.tophead[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:476px;position:absolute;z-index:2;opacity:.6;background:linear-gradient(166.95deg,rgb(148,191,255) 0%,rgb(227,230,250) 46.69%,rgb(244,248,251) 100%)}.coverhead[_ngcontent-%COMP%]{display:flex;position:relative;z-index:1;left:0;right:0;top:0;width:100%;height:467px;opacity:1;background:url(/assets/img/bg.png) no-repeat center center;background-size:cover}.logo[_ngcontent-%COMP%]{position:absolute;z-index:4;top:100px;left:50%;transform:translate(-50%);width:343px;height:161px;opacity:1;border-radius:16px;background:url(/assets/img/1.png) no-repeat center center;background-size:contain;background-clip:padding-box}ion-list[_ngcontent-%COMP%]{background:transparent;position:fixed;z-index:5;top:400px;bottom:0;width:100%;overflow-y:auto;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0}ion-item[_ngcontent-%COMP%]{background:transparent;--padding-start: 10px;--inner-padding-end: 10px;--border-color: transparent}ion-icon[_ngcontent-%COMP%]{margin-right:8px}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;position:absolute;width:100%;top:0;left:0;z-index:10}ion-spinner[_ngcontent-%COMP%]{width:50px;height:100px}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(b),l.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,u.u5,o.Pc,P]}),n})()}}]);